jQuery(function(t){t("#projects-categories li a").on("click",function(e){e.preventDefault();var i=t(this);t.ajax({url:window.wp_data.ajax_url,type:"POST",data:{action:"projects_filter",term:i.data("category-id")},beforeSend:function(t){i.css("opacity",.5)},success:function(e){i.css("opacity",1),t("#projects-portfolio").html(e)}})}),t("#projects-load-more").on("click",function(e){e.preventDefault();var i=t(this);t.ajax({url:window.wp_data.ajax_url,type:"POST",data:{action:"projects_filter",term:i.data("category-id"),paged:i.data("page")},success:function(t){i.remove(),jQuery("#projects-portfolio").append(t)}})})}),function(t){t.fn.topBtnToggle=function(e){var i=t.extend({scrollTrigger:400,debug:!1},e);if(this.length){var n=t(window).scrollTop();n>i.scrollTrigger?this.addClass("show"):this.removeClass("show"),i.debug&&console.log("scroll Y: "+n+"px")}}}(jQuery),function(t){t.fn.bgParallax=function(e){var i=t.extend({bgpositionX:50,bgpositionY:50,direction:"bottom",debug:!1,min:0,max:100,speed:2},e),n=t(document).height()-t(window).height(),s=n-(this.offset().top+this.height());this.offset().top<n&&(s=0);var o=this.offset().top+this.height();if(t(window).scrollTop()>s&&t(window).scrollTop()<o){var r=i.bgpositionY+(t(window).scrollTop()-s)/(o-s)*100*i.speed;"top"==i.direction&&(r=100-r),r>i.max&&(r=i.max),r<i.min&&(r=i.min),i.debug&&console.log("scroll Y: "+t(window).scrollTop()+"px | background position Y: "+r+"%")}return this.css({backgroundPosition:i.bgpositionX+"% "+r+"%"})}}(jQuery);var isElemVisible=function(t){const{top:e,height:i,bottom:n}=t.getBoundingClientRect(),s=document.documentElement.clientHeight;t=t.parentNode;do{if(viewport=t.getBoundingClientRect(),e<=viewport.bottom==!1)return!1;if(n<=viewport.top)return!1;t=t.parentNode}while(t!=document.body);return((s-e)/i).toFixed(2)},addVisibleClass=function(t,e,i,n){for(var s=0;s<t.length;++s){var o=t[s];if(o){var r=isElemVisible(o);if(r>0)if((r-=e>0&&e<=1?e:0)>0&&!o.classList.contains("visible")&&o.classList.add("visible"),o.classList.contains("visible")&&"fadeIn"===i&&r+e<=1){var a=(r*(1+e)+e*e).toFixed(2);o.style.opacity=a<=1?a:1}else o.classList.contains("visible")&&"fadeIn"!==i&&(o.style.opacity=1);else"hideOnScrollDown"===n&&o.classList.contains("visible")&&(o.classList.remove("visible"),"fadeIn"===i&&(o.style.opacity=0))}}};!function(t,e,i){function n(t,e){return typeof t===e}function s(t,e){return!!~(""+t).indexOf(e)}function o(){return"function"!=typeof e.createElement?e.createElement(arguments[0]):C?e.createElementNS.call(e,"http://www.w3.org/2000/svg",arguments[0]):e.createElement.apply(e,arguments)}function r(t){return t.replace(/([a-z])-([a-z])/g,function(t,e,i){return e+i.toUpperCase()}).replace(/^-/,"")}function a(t,i,n,s){var r,a,l,c,u="modernizr",h=o("div"),d=function(){var t=e.body;return t||((t=o(C?"svg":"body")).fake=!0),t}();if(parseInt(n,10))for(;n--;)(l=o("div")).id=s?s[n]:u+(n+1),h.appendChild(l);return(r=o("style")).type="text/css",r.id="s"+u,(d.fake?d:h).appendChild(r),d.appendChild(h),r.styleSheet?r.styleSheet.cssText=t:r.appendChild(e.createTextNode(t)),h.id=u,d.fake&&(d.style.background="",d.style.overflow="hidden",c=w.style.overflow,w.style.overflow="hidden",w.appendChild(d)),a=i(h,t),d.fake?(d.parentNode.removeChild(d),w.style.overflow=c,w.offsetHeight):h.parentNode.removeChild(h),!!a}function l(t){return t.replace(/([A-Z])/g,function(t,e){return"-"+e.toLowerCase()}).replace(/^ms-/,"-ms-")}function c(e,i,n){var s;if("getComputedStyle"in t){s=getComputedStyle.call(t,e,i);var o=t.console;if(null!==s)n&&(s=s.getPropertyValue(n));else if(o){o[o.error?"error":"log"].call(o,"getComputedStyle returning null, its possible modernizr test results are inaccurate")}}else s=!i&&e.currentStyle&&e.currentStyle[n];return s}function u(e,n){var s=e.length;if("CSS"in t&&"supports"in t.CSS){for(;s--;)if(t.CSS.supports(l(e[s]),n))return!0;return!1}if("CSSSupportsRule"in t){for(var o=[];s--;)o.push("("+l(e[s])+":"+n+")");return a("@supports ("+(o=o.join(" or "))+") { #modernizr { position: absolute; } }",function(t){return"absolute"==c(t,null,"position")})}return i}function h(t,e,a,l){function c(){d&&(delete E.style,delete E.modElem)}if(l=!n(l,"undefined")&&l,!n(a,"undefined")){var h=u(t,a);if(!n(h,"undefined"))return h}for(var d,f,p,g,v,m=["modernizr","tspan","samp"];!E.style&&m.length;)d=!0,E.modElem=o(m.shift()),E.style=E.modElem.style;for(p=t.length,f=0;p>f;f++)if(g=t[f],v=E.style[g],s(g,"-")&&(g=r(g)),E.style[g]!==i){if(l||n(a,"undefined"))return c(),"pfx"!=e||g;try{E.style[g]=a}catch(t){}if(E.style[g]!=v)return c(),"pfx"!=e||g}return c(),!1}function d(t,e){return function(){return t.apply(e,arguments)}}function f(t,e,i,s,o){var r=t.charAt(0).toUpperCase()+t.slice(1),a=(t+" "+T.join(r+" ")+r).split(" ");return n(e,"string")||n(e,"undefined")?h(a,e,s,o):function(t,e,i){var s;for(var o in t)if(t[o]in e)return!1===i?t[o]:n(s=e[t[o]],"function")?d(s,i||e):s;return!1}(a=(t+" "+x.join(r+" ")+r).split(" "),e,i)}function p(t,e,n){return f(t,i,i,e,n)}var g=[],v=[],m={_version:"3.6.0",_config:{classPrefix:"",enableClasses:!0,enableJSClass:!0,usePrefixes:!0},_q:[],on:function(t,e){var i=this;setTimeout(function(){e(i[t])},0)},addTest:function(t,e,i){v.push({name:t,fn:e,options:i})},addAsyncTest:function(t){v.push({name:null,fn:t})}},_=function(){};_.prototype=m,_=new _;var y=m._config.usePrefixes?" -webkit- -moz- -o- -ms- ".split(" "):["",""];m._prefixes=y;var b="Moz O ms Webkit",x=m._config.usePrefixes?b.toLowerCase().split(" "):[];m._domPrefixes=x;var w=e.documentElement,C="svg"===w.nodeName.toLowerCase(),j="CSS"in t&&"supports"in t.CSS,S="supportsCSS"in t;_.addTest("supports",j||S);var T=m._config.usePrefixes?b.split(" "):[];m._cssomPrefixes=T;var z=(m.testStyles=a,{elem:o("modernizr")});_._q.push(function(){delete z.elem});var E={style:z.elem.style};_._q.unshift(function(){delete E.style}),m.testProp=function(t,e,n){return h([t],i,e,n)},m.testAllProps=f,m.testAllProps=p,_.addTest("csstransforms",function(){return-1===navigator.userAgent.indexOf("Android 2.")&&p("transform","scale(1)",!0)}),_.addTest("csstransforms3d",function(){return!!p("perspective","1px",!0)}),_.addTest("csstransitions",p("transition","all",!0)),function(){var t,e,i,s,o,r;for(var a in v)if(v.hasOwnProperty(a)){if(t=[],(e=v[a]).name&&(t.push(e.name.toLowerCase()),e.options&&e.options.aliases&&e.options.aliases.length))for(i=0;i<e.options.aliases.length;i++)t.push(e.options.aliases[i].toLowerCase());for(s=n(e.fn,"function")?e.fn():e.fn,o=0;o<t.length;o++)1===(r=t[o].split(".")).length?_[r[0]]=s:(!_[r[0]]||_[r[0]]instanceof Boolean||(_[r[0]]=new Boolean(_[r[0]])),_[r[0]][r[1]]=s),g.push((s?"":"no-")+r.join("-"))}}(),function(t){var e=w.className,i=_._config.classPrefix||"";if(C&&(e=e.baseVal),_._config.enableJSClass){var n=new RegExp("(^|\\s)"+i+"no-js(\\s|$)");e=e.replace(n,"$1"+i+"js$2")}_._config.enableClasses&&(e+=" "+i+t.join(" "+i),C?w.className.baseVal=e:w.className=e)}(g),delete m.addTest,delete m.addAsyncTest;for(var P=0;P<_._q.length;P++)_._q[P]();t.Modernizr=_}(window,document),function(t,e){var i=function(t,e){"use strict";var i,n;if(function(){var e,i={lazyClass:"lazyload",loadedClass:"lazyloaded",loadingClass:"lazyloading",preloadClass:"lazypreload",errorClass:"lazyerror",autosizesClass:"lazyautosizes",srcAttr:"data-src",srcsetAttr:"data-srcset",sizesAttr:"data-sizes",minSize:40,customMedia:{},init:!0,expFactor:1.5,hFac:.8,loadMode:2,loadHidden:!0,ricTimeout:0,throttleDelay:125};for(e in n=t.lazySizesConfig||t.lazysizesConfig||{},i)e in n||(n[e]=i[e])}(),!e||!e.getElementsByClassName)return{init:function(){},cfg:n,noSupport:!0};var s=e.documentElement,o=t.Date,r=t.HTMLPictureElement,a="addEventListener",l="getAttribute",c=t[a],u=t.setTimeout,h=t.requestAnimationFrame||u,d=t.requestIdleCallback,f=/^picture$/i,p=["load","error","lazyincluded","_lazyloaded"],g={},v=Array.prototype.forEach,m=function(t,e){return g[e]||(g[e]=new RegExp("(\\s|^)"+e+"(\\s|$)")),g[e].test(t[l]("class")||"")&&g[e]},_=function(t,e){m(t,e)||t.setAttribute("class",(t[l]("class")||"").trim()+" "+e)},y=function(t,e){var i;(i=m(t,e))&&t.setAttribute("class",(t[l]("class")||"").replace(i," "))},b=function(t,e,i){var n=i?a:"removeEventListener";i&&b(t,e),p.forEach(function(i){t[n](i,e)})},x=function(t,n,s,o,r){var a=e.createEvent("Event");return s||(s={}),s.instance=i,a.initEvent(n,!o,!r),a.detail=s,t.dispatchEvent(a),a},w=function(e,i){var s;!r&&(s=t.picturefill||n.pf)?(i&&i.src&&!e[l]("srcset")&&e.setAttribute("srcset",i.src),s({reevaluate:!0,elements:[e]})):i&&i.src&&(e.src=i.src)},C=function(t,e){return(getComputedStyle(t,null)||{})[e]},j=function(t,e,i){for(i=i||t.offsetWidth;i<n.minSize&&e&&!t._lazysizesWidth;)i=e.offsetWidth,e=e.parentNode;return i},S=function(){var t,i,n=[],s=[],o=n,r=function(){var e=o;for(o=n.length?s:n,t=!0,i=!1;e.length;)e.shift()();t=!1},a=function(n,s){t&&!s?n.apply(this,arguments):(o.push(n),i||(i=!0,(e.hidden?u:h)(r)))};return a._lsFlush=r,a}(),T=function(t,e){return e?function(){S(t)}:function(){var e=this,i=arguments;S(function(){t.apply(e,i)})}},z=function(t){var e,i=0,s=n.throttleDelay,r=n.ricTimeout,a=function(){e=!1,i=o.now(),t()},l=d&&r>49?function(){d(a,{timeout:r}),r!==n.ricTimeout&&(r=n.ricTimeout)}:T(function(){u(a)},!0);return function(t){var n;(t=!0===t)&&(r=33),e||(e=!0,(n=s-(o.now()-i))<0&&(n=0),t||n<9?l():u(l,n))}},E=function(t){var e,i,n=function(){e=null,t()},s=function(){var t=o.now()-i;t<99?u(s,99-t):(d||n)(n)};return function(){i=o.now(),e||(e=u(s,99))}},P=function(){var r,h,d,p,g,j,P,M,q,L,A,I,D=/^img$/i,$=/^iframe$/i,N="onscroll"in t&&!/(gle|ing)bot/.test(navigator.userAgent),O=0,F=0,R=-1,B=function(t){F--,(!t||F<0||!t.target)&&(F=0)},W=function(t){return null==I&&(I="hidden"==C(e.body,"visibility")),I||!("hidden"==C(t.parentNode,"visibility")&&"hidden"==C(t,"visibility"))},X=function(t,i){var n,o=t,r=W(t);for(M-=i,A+=i,q-=i,L+=i;r&&(o=o.offsetParent)&&o!=e.body&&o!=s;)(r=(C(o,"opacity")||1)>0)&&"visible"!=C(o,"overflow")&&(n=o.getBoundingClientRect(),r=L>n.left&&q<n.right&&A>n.top-1&&M<n.bottom+1);return r},H=function(){var t,o,a,c,u,d,f,g,v,m,_,y,b=i.elements;if((p=n.loadMode)&&F<8&&(t=b.length)){for(o=0,R++;o<t;o++)if(b[o]&&!b[o]._lazyRace)if(!N||i.prematureUnveil&&i.prematureUnveil(b[o]))K(b[o]);else if((g=b[o][l]("data-expand"))&&(d=1*g)||(d=O),m||(m=!n.expand||n.expand<1?s.clientHeight>500&&s.clientWidth>500?500:370:n.expand,i._defEx=m,_=m*n.expFactor,y=n.hFac,I=null,O<_&&F<1&&R>2&&p>2&&!e.hidden?(O=_,R=0):O=p>1&&R>1&&F<6?m:0),v!==d&&(j=innerWidth+d*y,P=innerHeight+d,f=-1*d,v=d),a=b[o].getBoundingClientRect(),(A=a.bottom)>=f&&(M=a.top)<=P&&(L=a.right)>=f*y&&(q=a.left)<=j&&(A||L||q||M)&&(n.loadHidden||W(b[o]))&&(h&&F<3&&!g&&(p<3||R<4)||X(b[o],d))){if(K(b[o]),u=!0,F>9)break}else!u&&h&&!c&&F<4&&R<4&&p>2&&(r[0]||n.preloadAfterLoad)&&(r[0]||!g&&(A||L||q||M||"auto"!=b[o][l](n.sizesAttr)))&&(c=r[0]||b[o]);c&&!u&&K(c)}},Q=z(H),Y=function(t){var e=t.target;e._lazyCache?delete e._lazyCache:(B(t),_(e,n.loadedClass),y(e,n.loadingClass),b(e,U),x(e,"lazyloaded"))},V=T(Y),U=function(t){V({target:t.target})},G=function(t){var e,i=t[l](n.srcsetAttr);(e=n.customMedia[t[l]("data-media")||t[l]("media")])&&t.setAttribute("media",e),i&&t.setAttribute("srcset",i)},J=T(function(t,e,i,s,o){var r,a,c,h,p,g;(p=x(t,"lazybeforeunveil",e)).defaultPrevented||(s&&(i?_(t,n.autosizesClass):t.setAttribute("sizes",s)),a=t[l](n.srcsetAttr),r=t[l](n.srcAttr),o&&(c=t.parentNode,h=c&&f.test(c.nodeName||"")),g=e.firesLoad||"src"in t&&(a||r||h),p={target:t},_(t,n.loadingClass),g&&(clearTimeout(d),d=u(B,2500),b(t,U,!0)),h&&v.call(c.getElementsByTagName("source"),G),a?t.setAttribute("srcset",a):r&&!h&&($.test(t.nodeName)?function(t,e){try{t.contentWindow.location.replace(e)}catch(i){t.src=e}}(t,r):t.src=r),o&&(a||h)&&w(t,{src:r})),t._lazyRace&&delete t._lazyRace,y(t,n.lazyClass),S(function(){var e=t.complete&&t.naturalWidth>1;g&&!e||(e&&_(t,"ls-is-cached"),Y(p),t._lazyCache=!0,u(function(){"_lazyCache"in t&&delete t._lazyCache},9)),"lazy"==t.loading&&F--},!0)}),K=function(t){if(!t._lazyRace){var e,i=D.test(t.nodeName),s=i&&(t[l](n.sizesAttr)||t[l]("sizes")),o="auto"==s;(!o&&h||!i||!t[l]("src")&&!t.srcset||t.complete||m(t,n.errorClass)||!m(t,n.lazyClass))&&(e=x(t,"lazyunveilread").detail,o&&k.updateElem(t,!0,t.offsetWidth),t._lazyRace=!0,F++,J(t,e,o,s,i))}},Z=E(function(){n.loadMode=3,Q()}),tt=function(){3==n.loadMode&&(n.loadMode=2),Z()},et=function(){if(!h){if(o.now()-g<999)return void u(et,999);h=!0,n.loadMode=3,Q(),c("scroll",tt,!0)}};return{_:function(){g=o.now(),i.elements=e.getElementsByClassName(n.lazyClass),r=e.getElementsByClassName(n.lazyClass+" "+n.preloadClass),c("scroll",Q,!0),c("resize",Q,!0),t.MutationObserver?new MutationObserver(Q).observe(s,{childList:!0,subtree:!0,attributes:!0}):(s[a]("DOMNodeInserted",Q,!0),s[a]("DOMAttrModified",Q,!0),setInterval(Q,999)),c("hashchange",Q,!0),["focus","mouseover","click","load","transitionend","animationend"].forEach(function(t){e[a](t,Q,!0)}),/d$|^c/.test(e.readyState)?et():(c("load",et),e[a]("DOMContentLoaded",Q),u(et,2e4)),i.elements.length?(H(),S._lsFlush()):Q()},checkElems:Q,unveil:K,_aLSL:tt}}(),k=function(){var t,i=T(function(t,e,i,n){var s,o,r;if(t._lazysizesWidth=n,n+="px",t.setAttribute("sizes",n),f.test(e.nodeName||""))for(s=e.getElementsByTagName("source"),o=0,r=s.length;o<r;o++)s[o].setAttribute("sizes",n);i.detail.dataAttr||w(t,i.detail)}),s=function(t,e,n){var s,o=t.parentNode;o&&(n=j(t,o,n),(s=x(t,"lazybeforesizes",{width:n,dataAttr:!!e})).defaultPrevented||(n=s.detail.width)&&n!==t._lazysizesWidth&&i(t,o,s,n))},o=E(function(){var e,i=t.length;if(i)for(e=0;e<i;e++)s(t[e])});return{_:function(){t=e.getElementsByClassName(n.autosizesClass),c("resize",o)},checkElems:o,updateElem:s}}(),M=function(){!M.i&&e.getElementsByClassName&&(M.i=!0,k._(),P._())};return u(function(){n.init&&M()}),i={cfg:n,autoSizer:k,loader:P,init:M,uP:w,aC:_,rC:y,hC:m,fire:x,gW:j,rAF:S}}(t,t.document);t.lazySizes=i,"object"==typeof module&&module.exports&&(module.exports=i)}("undefined"!=typeof window?window:{}),function(t,e,i,n){"use strict";var s=function(){var t;return""==(t=(t=i.body||i.documentElement).style).WebkitTransition?"-webkit-":""==t.MozTransition?"-moz-":""==t.OTransition?"-o-":""==t.transition&&""},o=!1!==s(),r=function(t,e,i){var n={},o=s();n[o+"transform"]="translateX("+e+")",n[o+"transition"]=o+"transform "+i+"s linear",t.css(n)},a="ontouchstart"in e,l=e.navigator.pointerEnabled||e.navigator.msPointerEnabled,c=function(t){if(a)return!0;if(!l||void 0===t||void 0===t.pointerType)return!1;if(void 0!==t.MSPOINTER_TYPE_MOUSE){if(t.MSPOINTER_TYPE_MOUSE!=t.pointerType)return!0}else if("mouse"!=t.pointerType)return!0;return!1};t.fn.gallerylightbox=function(n){n=t.extend({container:"gallery-lightbox-container",selector:"gallery-lightbox",animationSpeed:250,preloadNext:!0,enableKeyboard:!0,quitOnEnd:!1,quitOnImgClick:!1,quitOnDocClick:!0,onStart:!1,onEnd:!1,onLoadStart:!1,onLoadEnd:!1},n);var s=t(),u=t([]),h=t(),d=t(),f=0,p=0,g=0,v=!1,m=function(){if(!d.length)return!0;var i=.8*t(e).width(),n=.9*t(e).height(),o=new Image;o.src=d.attr("src"),o.onload=function(){if(f=o.width,p=o.height,f>i||p>n){var r=f/p>i/n?f/i:p/n;f/=r,p/=r}s.css({width:f+"px",height:p+"px",top:(t(e).height()-p)/2+"px",left:(t(e).width()-f)/2+"px"})}},_=function(e){if(v)return!1;if(e=void 0!==e&&("left"==e?1:-1),d.length){if(!1!==e&&(u.length<2||!0===n.quitOnEnd&&(-1===e&&0==u.index(h)||1===e&&u.index(h)==u.length-1)))return b(),!1;var i={opacity:0};o?r(s,100*e-g+"px",n.animationSpeed/1e3):i.left=parseInt(s.css("left"))+100*e+"px",s.animate(i,n.animationSpeed,function(){y()}),g=0}v=!0,!1!==n.onLoadStart&&n.onLoadStart(),setTimeout(function(){d=t('<img id="'+n.selector+'" />').appendTo(s).attr("src",h.attr("href")).on("load",function(){m();var i={opacity:1};if(s.css("opacity",0),o)r(s,-100*e+"px",0),setTimeout(function(){r(s,"0px",n.animationSpeed/1e3)},50);else{var a=parseInt(s.css("left"));i.left=a+"px",s.css("left",a-100*e+"px")}if(s.animate(i,n.animationSpeed,function(){v=!1,!1!==n.onLoadEnd&&n.onLoadEnd()}),n.preloadNext){var l=u.eq(u.index(h)+1);l.length||(l=u.eq(0)),t("<img />").attr("src",l.attr("href"))}}).on("error",function(){!1!==n.onLoadEnd&&n.onLoadEnd()});var i=0,a=0,p=0;d.on(l?"pointerup MSPointerUp":"click",function(t){if(t.preventDefault(),n.quitOnImgClick)return b(),!1;if(c(t.originalEvent))return!0;var e=(t.pageX||t.originalEvent.pageX)-t.target.offsetLeft;(h=u.eq(u.index(h)-(f/2>e?1:-1))).length||(h=u.eq(f/2>e?u.length:0)),_(f/2>e?"left":"right")}).on("touchstart pointerdown MSPointerDown",function(t){if(!c(t.originalEvent)||n.quitOnImgClick)return!0;o&&(p=parseInt(s.css("left"))),i=t.originalEvent.pageX||t.originalEvent.touches[0].pageX}).on("touchmove pointermove MSPointerMove",function(t){if(!c(t.originalEvent)||n.quitOnImgClick)return!0;t.preventDefault(),a=t.originalEvent.pageX||t.originalEvent.touches[0].pageX,g=i-a,o?r(s,-g+"px",0):s.css("left",p-g+"px")}).on("touchend touchcancel pointerup pointercancel MSPointerUp MSPointerCancel",function(t){if(!c(t.originalEvent)||n.quitOnImgClick)return!0;Math.abs(g)>50?((h=u.eq(u.index(h)-(g<0?1:-1))).length||(h=u.eq(g<0?u.length:0)),_(g>0?"right":"left")):o?r(s,"0px",n.animationSpeed/1e3):s.animate({left:p+"px"},n.animationSpeed/2)})},n.animationSpeed+100)},y=function(){if(!d.length)return!1;d.remove(),d=t()},b=function(){if(!d.length)return!1;s.animate({opacity:0},n.animationSpeed,function(){y(),v=!1,!1!==n.onEnd&&n.onEnd()}),s.remove()},x=function(e){e.each(function(){u=u.add(t(this))}),e.on("click.gallerylightbox",function(e){if(e.preventDefault(),v)return!1;v=!1,t.when(s=t('<div id="'+n.container+'"></div>').appendTo("body")).done(function(){!1!==n.onStart&&n.onStart()}),h=t(this),_()})};return t(e).on("resize",m),n.quitOnDocClick&&t(i).on(a?"touchend":"click",function(e){d.length&&!t(e.target).is(d)&&b()}),n.enableKeyboard&&t(i).on("keyup",function(t){if(!d.length)return!0;t.preventDefault(),27==t.keyCode&&b(),37!=t.keyCode&&39!=t.keyCode||((h=u.eq(u.index(h)-(37==t.keyCode?1:-1))).length||(h=u.eq(37==t.keyCode?u.length:0)),_(37==t.keyCode?"left":"right"))}),x(t(this)),this.switch_gallerylightbox=function(t,e){var i=u.eq(t);if(i.length){u.index(h);h=i,_(e)}return this},this.add_gallerylightbox=function(t){x(t)},this.quit_gallerylightbox=function(){return b(),this},this}}(jQuery,window,document),$(function(){var t=$(),e="gallery-lightbox-overlay",i=function(){$("#gallery-lightbox-caption").remove()},n="#gallery a",s=$(n).gallerylightbox({animationSpeed:200,quitOnEnd:!0,quitOnImgClick:!1,quitOnDocClick:!0,onStart:function(){var i;$('<div id="'+e+'"></div>').appendTo("body"),t=$('<div id="gallery-lightbox-preloader" class="preloader"><i class="fa fa-spinner fa-spin"></i></div>').appendTo("body"),i=s,$('<div class="close-button" id="gallery-lightbox-close" title="Закрыть"></div>').appendTo("body").on("click touchend",function(){return $(this).remove(),i.quit_gallerylightbox(),!1}),function(t,e){var i=$('<a href="#" class="gallery-lightbox-arrow prev"><i class="fa icon arrow-left"></i></a><a href="#" class="gallery-lightbox-arrow next"><i class="fa icon arrow-right"></i></a>');i.appendTo("body"),i.on("click touchend",function(i){i.preventDefault();var n=$(this),s=$(e+'[href="'+$("#gallery-lightbox").attr("src")+'"]').index(e),o=null;return n.hasClass("prev")?(o="left",s-=1):n.hasClass("next")&&(o="right",s+=1,$(e).eq(s).length||(s=0)),t.switch_gallerylightbox(s,o),!1})}(s,n),function(t,e){var i=$(e);if(i.length){for(var n=$('<div id="gallery-lightbox-nav"></div>').appendTo("#gallery-lightbox-container").on("click touchend",function(){return!1}),s=0;s<i.length;s++)n.append('<div class="nav-dot"></div>');var o=n.find("div").on("click touchend",function(){var e=$(this);return i.eq(e.index()).attr("href")!=$("#gallery-lightbox").attr("src")&&t.switch_gallerylightbox(e.index()),o.removeClass("active"),o.eq(e.index()).addClass("active"),!1}).on("touchend",function(){return!1})}}(s,n)},onEnd:function(){$("#"+e).remove(),i(),$("#gallery-lightbox-close").remove(),$(".gallery-lightbox-arrow").remove(),$("#gallery-lightbox-nav").remove()},onLoadStart:function(){i()},onLoadEnd:function(){var e,i,s;t&&t.remove(),(e=$('a[href="'+$("#gallery-lightbox").attr("src")+'"] img').attr("alt")).length>0&&$('<div id="gallery-lightbox-caption">'+e+"</div>").appendTo("#gallery-lightbox-container"),i=n,(s=$("#gallery-lightbox-nav .nav-dot")).removeClass("active"),s.eq($(i).filter('[href="'+$("#gallery-lightbox").attr("src")+'"]').index(i)).addClass("active")}})}),function(t){"use strict";var e=t.jCarousel={};e.version="0.3.9";var i=/^([+\-]=)?(.+)$/;e.parseTarget=function(t){var e=!1,n="object"!=typeof t?i.exec(t):null;return n?(t=parseInt(n[2],10)||0,n[1]&&(e=!0,"-="===n[1]&&(t*=-1))):"object"!=typeof t&&(t=parseInt(t,10)||0),{target:t,relative:e}},e.detectCarousel=function(t){for(var e;t.length>0;){if((e=t.filter("[data-jcarousel]")).length>0)return e;if((e=t.find("[data-jcarousel]")).length>0)return e;t=t.parent()}return null},e.base=function(i){return{version:e.version,_options:{},_element:null,_carousel:null,_init:t.noop,_create:t.noop,_destroy:t.noop,_reload:t.noop,create:function(){return this._element.attr("data-"+i.toLowerCase(),!0).data(i,this),!1===this._trigger("create")?this:(this._create(),this._trigger("createend"),this)},destroy:function(){return!1===this._trigger("destroy")?this:(this._destroy(),this._trigger("destroyend"),this._element.removeData(i).removeAttr("data-"+i.toLowerCase()),this)},reload:function(t){return!1===this._trigger("reload")?this:(t&&this.options(t),this._reload(),this._trigger("reloadend"),this)},element:function(){return this._element},options:function(e,i){if(0===arguments.length)return t.extend({},this._options);if("string"==typeof e){if(void 0===i)return void 0===this._options[e]?null:this._options[e];this._options[e]=i}else this._options=t.extend({},this._options,e);return this},carousel:function(){return this._carousel||(this._carousel=e.detectCarousel(this.options("carousel")||this._element),this._carousel||t.error('Could not detect carousel for plugin "'+i+'"')),this._carousel},_trigger:function(e,n,s){var o,r=!1;return s=[this].concat(s||[]),(n||this._element).each(function(){o=t.Event((i+":"+e).toLowerCase()),t(this).trigger(o,s),o.isDefaultPrevented()&&(r=!0)}),!r}}},e.plugin=function(i,n){var s=t[i]=function(e,i){this._element=t(e),this.options(i),this._init(),this.create()};return s.fn=s.prototype=t.extend({},e.base(i),n),t.fn[i]=function(e){var n=Array.prototype.slice.call(arguments,1),o=this;return"string"==typeof e?this.each(function(){var s=t(this).data(i);if(!s)return t.error("Cannot call methods on "+i+' prior to initialization; attempted to call method "'+e+'"');if(!t.isFunction(s[e])||"_"===e.charAt(0))return t.error('No such method "'+e+'" for '+i+" instance");var r=s[e].apply(s,n);return r!==s&&void 0!==r?(o=r,!1):void 0}):this.each(function(){var n=t(this).data(i);n instanceof s?n.reload(e):new s(this,e)}),o},s}}(jQuery),function(t,e){"use strict";var i=t(e),n=function(t){return parseFloat(t)||0};t.jCarousel.plugin("jcarousel",{animating:!1,tail:0,inTail:!1,resizeState:null,resizeTimer:null,lt:null,vertical:!1,rtl:!1,circular:!1,underflow:!1,relative:!1,_options:{list:function(){return this.element().children().eq(0)},items:function(){return this.list().children()},animation:400,transitions:!1,wrap:null,vertical:null,rtl:null,center:!1},_list:null,_items:null,_target:t(),_first:t(),_last:t(),_visible:t(),_fullyvisible:t(),_init:function(){var t=this;return t.resizeState=i.width()+"x"+i.height(),this.onWindowResize=function(){t.resizeTimer&&clearTimeout(t.resizeTimer),t.resizeTimer=setTimeout(function(){var e=i.width()+"x"+i.height();e!==t.resizeState&&(t.resizeState=e,t.reload())},100)},this},_create:function(){this._reload(),i.on("resize.jcarousel",this.onWindowResize)},_destroy:function(){i.off("resize.jcarousel",this.onWindowResize)},_reload:function(){this.vertical=this.options("vertical"),null==this.vertical&&(this.vertical=n(this.list().height())>n(this.list().width())),this.rtl=this.options("rtl"),null==this.rtl&&(this.rtl=function(e){if("rtl"===(""+e.attr("dir")).toLowerCase())return!0;var i=!1;return e.parents("[dir]").each(function(){if(/rtl/i.test(t(this).attr("dir")))return i=!0,!1}),i}(this._element)),this.lt=this.vertical?"top":"left",this.relative="relative"===this.list().css("position"),this._list=null,this._items=null;var e=this.index(this._target)>=0?this._target:this.closest();this.circular="circular"===this.options("wrap"),this.underflow=!1;var i={left:0,top:0};return e.length>0&&(this._prepare(e),this.list().find("[data-jcarousel-clone]").remove(),this._items=null,this.underflow=this._fullyvisible.length>=this.items().length,this.circular=this.circular&&!this.underflow,i[this.lt]=this._position(e)+"px"),this.move(i),this},list:function(){if(null===this._list){var e=this.options("list");this._list=t.isFunction(e)?e.call(this):this._element.find(e)}return this._list},items:function(){if(null===this._items){var e=this.options("items");this._items=(t.isFunction(e)?e.call(this):this.list().find(e)).not("[data-jcarousel-clone]")}return this._items},index:function(t){return this.items().index(t)},closest:function(){var e,i=this,s=this.list().position()[this.lt],o=t(),r=!1,a=this.vertical?"bottom":this.rtl&&!this.relative?"left":"right";return this.rtl&&this.relative&&!this.vertical&&(s+=n(this.list().width())-this.clipping()),this.items().each(function(){if(o=t(this),r)return!1;var l=i.dimension(o);if((s+=l)>=0){if(e=l-n(o.css("margin-"+a)),!(Math.abs(s)-l+e/2<=0))return!1;r=!0}}),o},target:function(){return this._target},first:function(){return this._first},last:function(){return this._last},visible:function(){return this._visible},fullyvisible:function(){return this._fullyvisible},hasNext:function(){if(!1===this._trigger("hasnext"))return!0;var t=this.options("wrap"),e=this.items().length-1,i=this.options("center")?this._target:this._last;return!!(e>=0&&!this.underflow&&(t&&"first"!==t||this.index(i)<e||this.tail&&!this.inTail))},hasPrev:function(){if(!1===this._trigger("hasprev"))return!0;var t=this.options("wrap");return!!(this.items().length>0&&!this.underflow&&(t&&"last"!==t||this.index(this._first)>0||this.tail&&this.inTail))},clipping:function(){return n(this._element["inner"+(this.vertical?"Height":"Width")]())},dimension:function(t){return n(t["outer"+(this.vertical?"Height":"Width")](!0))},scroll:function(e,i,n){if(this.animating)return this;if(!1===this._trigger("scroll",null,[e,i]))return this;t.isFunction(i)&&(n=i,i=!0);var s=t.jCarousel.parseTarget(e);if(s.relative){var o,r,a,l,c,u,h,d,f=this.items().length-1,p=Math.abs(s.target),g=this.options("wrap");if(s.target>0){var v=this.index(this._last);if(v>=f&&this.tail)this.inTail?"both"===g||"last"===g?this._scroll(0,i,n):t.isFunction(n)&&n.call(this,!1):this._scrollTail(i,n);else if(o=this.index(this._target),this.underflow&&o===f&&("circular"===g||"both"===g||"last"===g)||!this.underflow&&v===f&&("both"===g||"last"===g))this._scroll(0,i,n);else if(a=o+p,this.circular&&a>f){for(d=f,c=this.items().get(-1);d++<a;)c=this.items().eq(0),(u=this._visible.index(c)>=0)&&c.after(c.clone(!0).attr("data-jcarousel-clone",!0)),this.list().append(c),u||((h={})[this.lt]=this.dimension(c),this.moveBy(h)),this._items=null;this._scroll(c,i,n)}else this._scroll(Math.min(a,f),i,n)}else if(this.inTail)this._scroll(Math.max(this.index(this._first)-p+1,0),i,n);else if(r=this.index(this._first),o=this.index(this._target),a=(l=this.underflow?o:r)-p,l<=0&&(this.underflow&&"circular"===g||"both"===g||"first"===g))this._scroll(f,i,n);else if(this.circular&&a<0){for(d=a,c=this.items().get(0);d++<0;){c=this.items().eq(-1),(u=this._visible.index(c)>=0)&&c.after(c.clone(!0).attr("data-jcarousel-clone",!0)),this.list().prepend(c),this._items=null;var m=this.dimension(c);(h={})[this.lt]=-m,this.moveBy(h)}this._scroll(c,i,n)}else this._scroll(Math.max(a,0),i,n)}else this._scroll(s.target,i,n);return this._trigger("scrollend"),this},moveBy:function(t,e){var i=this.list().position(),s=1,o=0;return this.rtl&&!this.vertical&&(s=-1,this.relative&&(o=n(this.list().width())-this.clipping())),t.left&&(t.left=n(i.left)+o+n(t.left)*s+"px"),t.top&&(t.top=n(i.top)+o+n(t.top)*s+"px"),this.move(t,e)},move:function(e,i){i=i||{};var n=this.options("transitions"),s=!!n,o=!!n.transforms,r=!!n.transforms3d,a=i.duration||0,l=this.list();if(!s&&a>0)l.animate(e,i);else{var c=i.complete||t.noop,u={};if(s){var h={transitionDuration:l.css("transitionDuration"),transitionTimingFunction:l.css("transitionTimingFunction"),transitionProperty:l.css("transitionProperty")},d=c;c=function(){t(this).css(h),d.call(this)},u={transitionDuration:(a>0?a/1e3:0)+"s",transitionTimingFunction:n.easing||i.easing,transitionProperty:a>0?o||r?"all":e.left?"left":"top":"none",transform:"none"}}r?u.transform="translate3d("+(e.left||0)+","+(e.top||0)+",0)":o?u.transform="translate("+(e.left||0)+","+(e.top||0)+")":t.extend(u,e),s&&a>0&&l.one("transitionend webkitTransitionEnd oTransitionEnd otransitionend MSTransitionEnd",c),l.css(u),a<=0&&l.each(function(){c.call(this)})}},_scroll:function(e,i,s){if(this.animating)return t.isFunction(s)&&s.call(this,!1),this;if("object"!=typeof e?e=this.items().eq(e):void 0===e.jquery&&(e=t(e)),0===e.length)return t.isFunction(s)&&s.call(this,!1),this;this.inTail=!1,this._prepare(e);var o=this._position(e);if(o===n(this.list().position()[this.lt]))return t.isFunction(s)&&s.call(this,!1),this;var r={};return r[this.lt]=o+"px",this._animate(r,i,s),this},_scrollTail:function(e,i){if(this.animating||!this.tail)return t.isFunction(i)&&i.call(this,!1),this;var s=this.list().position()[this.lt];this.rtl&&this.relative&&!this.vertical&&(s+=n(this.list().width())-this.clipping()),this.rtl&&!this.vertical?s+=this.tail:s-=this.tail,this.inTail=!0;var o={};return o[this.lt]=s+"px",this._update({target:this._target.next(),fullyvisible:this._fullyvisible.slice(1).add(this._visible.last())}),this._animate(o,e,i),this},_animate:function(e,i,n){if(n=n||t.noop,!1===this._trigger("animate"))return n.call(this,!1),this;this.animating=!0;var s=this.options("animation"),o=t.proxy(function(){this.animating=!1;var t=this.list().find("[data-jcarousel-clone]");t.length>0&&(t.remove(),this._reload()),this._trigger("animateend"),n.call(this,!0)},this),r="object"==typeof s?t.extend({},s):{duration:s},a=r.complete||t.noop;return!1===i?r.duration=0:void 0!==t.fx.speeds[r.duration]&&(r.duration=t.fx.speeds[r.duration]),r.complete=function(){o(),a.call(this)},this.move(e,r),this},_prepare:function(e){var i,s,o,r=this.index(e),a=r,l=this.dimension(e),c=this.clipping(),u=this.vertical?"bottom":this.rtl?"left":"right",h=this.options("center"),d={target:e,first:e,last:e,visible:e,fullyvisible:l<=c?e:t()};if(h&&(l/=2,c/=2),l<c)for(;;){if(0===(i=this.items().eq(++a)).length){if(!this.circular)break;if(i=this.items().eq(0),e.get(0)===i.get(0))break;if((s=this._visible.index(i)>=0)&&i.after(i.clone(!0).attr("data-jcarousel-clone",!0)),this.list().append(i),!s){var f={};f[this.lt]=this.dimension(i),this.moveBy(f)}this._items=null}if(0===(o=this.dimension(i)))break;if(l+=o,d.last=i,d.visible=d.visible.add(i),l-n(i.css("margin-"+u))<=c&&(d.fullyvisible=d.fullyvisible.add(i)),l>=c)break}if(!this.circular&&!h&&l<c)for(a=r;!(--a<0||0===(i=this.items().eq(a)).length||0===(o=this.dimension(i))||(l+=o,d.first=i,d.visible=d.visible.add(i),l-n(i.css("margin-"+u))<=c&&(d.fullyvisible=d.fullyvisible.add(i)),l>=c)););return this._update(d),this.tail=0,h||"circular"===this.options("wrap")||"custom"===this.options("wrap")||this.index(d.last)!==this.items().length-1||(l-=n(d.last.css("margin-"+u)))>c&&(this.tail=l-c),this},_position:function(t){var e=this._first,i=n(e.position()[this.lt]),s=this.options("center"),o=s?this.clipping()/2-this.dimension(e)/2:0;return this.rtl&&!this.vertical?(this.relative?i-=n(this.list().width())-this.dimension(e):i-=this.clipping()-this.dimension(e),i+=o):i-=o,!s&&(this.index(t)>this.index(e)||this.inTail)&&this.tail?(i=this.rtl&&!this.vertical?i-this.tail:i+this.tail,this.inTail=!0):this.inTail=!1,-i},_update:function(e){var i,n=this,s={target:this._target,first:this._first,last:this._last,visible:this._visible,fullyvisible:this._fullyvisible},o=this.index(e.first||s.first)<this.index(s.first),r=function(i){var r=[],a=[];e[i].each(function(){s[i].index(this)<0&&r.push(this)}),s[i].each(function(){e[i].index(this)<0&&a.push(this)}),o?r=r.reverse():a=a.reverse(),n._trigger(i+"in",t(r)),n._trigger(i+"out",t(a)),n["_"+i]=e[i]};for(i in e)r(i);return this}})}(jQuery,window),function(t){"use strict";t.jcarousel.fn.scrollIntoView=function(e,i,n){var s,o=t.jCarousel.parseTarget(e),r=this.index(this._fullyvisible.first()),a=this.index(this._fullyvisible.last());if((s=o.relative?o.target<0?Math.max(0,r+o.target):a+o.target:"object"!=typeof o.target?o.target:this.index(o.target))<r)return this.scroll(s,i,n);if(s>=r&&s<=a)return t.isFunction(n)&&n.call(this,!1),this;for(var l,c=this.items(),u=this.clipping(),h=this.vertical?"bottom":this.rtl?"left":"right",d=0;0!==(l=c.eq(s)).length;){if((d+=this.dimension(l))>=u){d-(parseFloat(l.css("margin-"+h))||0)!==u&&s++;break}if(s<=0)break;s--}return this.scroll(s,i,n)}}(jQuery),function(t){"use strict";t.jCarousel.plugin("jcarouselControl",{_options:{target:"+=1",event:"click",method:"scroll"},_active:null,_init:function(){this.onDestroy=t.proxy(function(){this._destroy(),this.carousel().one("jcarousel:createend",t.proxy(this._create,this))},this),this.onReload=t.proxy(this._reload,this),this.onEvent=t.proxy(function(e){e.preventDefault();var i=this.options("method");t.isFunction(i)?i.call(this):this.carousel().jcarousel(this.options("method"),this.options("target"))},this)},_create:function(){this.carousel().one("jcarousel:destroy",this.onDestroy).on("jcarousel:reloadend jcarousel:scrollend",this.onReload),this._element.on(this.options("event")+".jcarouselcontrol",this.onEvent),this._reload()},_destroy:function(){this._element.off(".jcarouselcontrol",this.onEvent),this.carousel().off("jcarousel:destroy",this.onDestroy).off("jcarousel:reloadend jcarousel:scrollend",this.onReload)},_reload:function(){var e,i=t.jCarousel.parseTarget(this.options("target")),n=this.carousel();if(i.relative)e=n.jcarousel(i.target>0?"hasNext":"hasPrev");else{var s="object"!=typeof i.target?n.jcarousel("items").eq(i.target):i.target;e=n.jcarousel("target").index(s)>=0}return this._active!==e&&(this._trigger(e?"active":"inactive"),this._active=e),this}})}(jQuery),function(t){"use strict";t.jCarousel.plugin("jcarouselPagination",{_options:{perPage:null,item:function(t){return'<a href="#'+t+'">'+t+"</a>"},event:"click",method:"scroll"},_carouselItems:null,_pages:{},_items:{},_currentPage:null,_init:function(){this.onDestroy=t.proxy(function(){this._destroy(),this.carousel().one("jcarousel:createend",t.proxy(this._create,this))},this),this.onReload=t.proxy(this._reload,this),this.onScroll=t.proxy(this._update,this)},_create:function(){this.carousel().one("jcarousel:destroy",this.onDestroy).on("jcarousel:reloadend",this.onReload).on("jcarousel:scrollend",this.onScroll),this._reload()},_destroy:function(){this._clear(),this.carousel().off("jcarousel:destroy",this.onDestroy).off("jcarousel:reloadend",this.onReload).off("jcarousel:scrollend",this.onScroll),this._carouselItems=null},_reload:function(){var e=this.options("perPage");if(this._pages={},this._items={},t.isFunction(e)&&(e=e.call(this)),null==e)this._pages=this._calculatePages();else for(var i,n=parseInt(e,10)||0,s=this._getCarouselItems(),o=1,r=0;0!==(i=s.eq(r++)).length;)this._pages[o]?this._pages[o]=this._pages[o].add(i):this._pages[o]=i,r%n==0&&o++;this._clear();var a=this,l=this.carousel().data("jcarousel"),c=this._element,u=this.options("item"),h=this._getCarouselItems().length;t.each(this._pages,function(e,i){var n=a._items[e]=t(u.call(a,e,i));n.on(a.options("event")+".jcarouselpagination",t.proxy(function(){var t=i.eq(0);if(l.circular){var n=l.index(l.target()),s=l.index(t);parseFloat(e)>parseFloat(a._currentPage)?s<n&&(t="+="+(h-n+s)):s>n&&(t="-="+(n+(h-s)))}l[this.options("method")](t)},a)),c.append(n)}),this._update()},_update:function(){var e,i=this.carousel().jcarousel("target");t.each(this._pages,function(t,n){if(n.each(function(){if(i.is(this))return e=t,!1}),e)return!1}),this._currentPage!==e&&(this._trigger("inactive",this._items[this._currentPage]),this._trigger("active",this._items[e])),this._currentPage=e},items:function(){return this._items},reloadCarouselItems:function(){return this._carouselItems=null,this},_clear:function(){this._element.empty(),this._currentPage=null},_calculatePages:function(){for(var t,e,i=this.carousel().data("jcarousel"),n=this._getCarouselItems(),s=i.clipping(),o=0,r=0,a=1,l={};0!==(t=n.eq(r++)).length;)o+(e=i.dimension(t))>s&&(a++,o=0),o+=e,l[a]?l[a]=l[a].add(t):l[a]=t;return l},_getCarouselItems:function(){return this._carouselItems||(this._carouselItems=this.carousel().jcarousel("items")),this._carouselItems}})}(jQuery),function(t,e){"use strict";var i,n;t.each({hidden:"visibilitychange",mozHidden:"mozvisibilitychange",msHidden:"msvisibilitychange",webkitHidden:"webkitvisibilitychange"},function(t,s){if(void 0!==e[t])return i=t,n=s,!1}),t.jCarousel.plugin("jcarouselAutoscroll",{_options:{target:"+=1",interval:3e3,autostart:!0,method:"scroll"},_timer:null,_started:!1,_init:function(){this.onDestroy=t.proxy(function(){this._destroy(),this.carousel().one("jcarousel:createend",t.proxy(this._create,this))},this),this.onAnimateEnd=t.proxy(this._start,this),this.onVisibilityChange=t.proxy(function(){e[i]?this._stop():this._start()},this)},_create:function(){this.carousel().one("jcarousel:destroy",this.onDestroy),t(e).on(n,this.onVisibilityChange),this.options("autostart")&&this.start()},_destroy:function(){this._stop(),this.carousel().off("jcarousel:destroy",this.onDestroy),t(e).off(n,this.onVisibilityChange)},_start:function(){if(this._stop(),this._started)return this.carousel().one("jcarousel:animateend",this.onAnimateEnd),this._timer=setTimeout(t.proxy(function(){this.carousel().jcarousel(this.options("method"),this.options("target"))},this),this.options("interval")),this},_stop:function(){return this._timer&&(this._timer=clearTimeout(this._timer)),this.carousel().off("jcarousel:animateend",this.onAnimateEnd),this},start:function(){return this._started=!0,this._start(),this},stop:function(){return this._started=!1,this._stop(),this}})}(jQuery,document),function(t){"use strict";t.jCarousel.plugin("jcarouselSwipe",{_options:{perSwipe:1,draggable:!0,method:"scroll"},_init:function(){var t=this;this.carousel().on("jcarousel:reloadend",function(){t._reload()})},_create:function(){this._instance=this.carousel().data("jcarousel"),this._instance._element.css("touch-action",this._instance.vertical?"pan-x":"pan-y"),this._carouselOffset=this.carousel().offset()[this._instance.lt]+parseInt(this.carousel().css(this._instance.vertical?"border-top-width":"border-left-width"))+parseInt(this.carousel().css(this._instance.vertical?"padding-top":"padding-left")),this._slidesCount=this._instance.items().length,this.carousel().find("img, a").attr("draggable",!1).css("user-select","none").on("dragstart",function(t){t.preventDefault()}),this._destroy(),this._instance.items().length>this._instance.fullyvisible().length&&this._initGestures()},_initGestures:function(){function e(e){var i,r,p;return e=e.originalEvent||e||window.event,c=n(e),u&&e.preventDefault(),Math.abs(l[f]-c[f])>10&&!u?void t(document).off("touchmove.jcarouselSwipe mousemove.jcarouselSwipe"):void(!h&&Math.abs(l[d]-c[d])>10&&(i=l[d]-c[d],u||(u=!0,a._addClones(),a._currentLT=a._getListPosition(),p=a._instance.options("items"),o=(t.isFunction(p)?p.call(a._instance):a._instance.list().find(p)).last(),s=-1*(o.position()[a._instance.lt]+a._instance.dimension(o)-a._instance.clipping())),r="circular"===a._instance._options.wrap?a._currentLT-i:Math.min(0,Math.max(a._currentLT-i,s)),a._setListPosition(r+"px")))}function i(e){if(e=e.originalEvent||e||window.event,c=n(e),u||!a._options.draggable&&Math.abs(l[d]-c[d])>10){var i=a._getNewTarget(l[d]-c[d]>0);i="circular"===a._instance._options.wrap?i.relative:i.static,r===e.target&&t(e.target).on("click.disable",function(e){e.stopImmediatePropagation(),e.stopPropagation(),e.preventDefault(),t(e.target).off("click.disable")}),"circular"===a._instance._options.wrap&&(a._removeClones(),a._instance._items=null),h=!0,a._instance[a._options.method](i,function(){u=!1,h=!1,"circular"!==a._instance._options.wrap&&(a._removeClones(),a._instance._items=null)})}t(document).off("touchmove.jcarouselSwipe mousemove.jcarouselSwipe"),t(document).off("touchend.jcarouselSwipe touchcancel.jcarouselSwipe mouseup.jcarouselSwipe")}function n(t){return void 0!==t.touches&&t.touches.length>0?{x:t.touches[0].pageX,y:t.touches[0].pageY}:void 0!==t.changedTouches&&t.changedTouches.length>0?{x:t.changedTouches[0].pageX,y:t.changedTouches[0].pageY}:void 0!==t.pageX?{x:t.pageX,y:t.pageY}:{x:t.clientX,y:t.clientY}}var s,o,r,a=this,l={},c={},u=!1,h=!1,d=this._instance.vertical?"y":"x",f=this._instance.vertical?"x":"y";this._element.on("touchstart.jcarouselSwipe mousedown.jcarouselSwipe",function(s){s=s.originalEvent||s||window.event,l=n(s),r=s.target||s.srcElement,a._options.draggable&&t(document).on("touchmove.jcarouselSwipe mousemove.jcarouselSwipe",e),t(document).on("touchend.jcarouselSwipe touchcancel.jcarouselSwipe mouseup.jcarouselSwipe",i)})},_getNewTarget:function(t){var e=this._instance.target(),i=this._instance.index(e),n=0;if(this._options.draggable)for(;!(!e.length||t&&e.offset()[this._instance.lt]-this._carouselOffset>=0||!t&&e.offset()[this._instance.lt]-this._carouselOffset<=0);){if(t){if(!(e=e.next()).length)break;i+=1}else{if(!(e=e.prev()).length)break;i-=1}n++}else i=t?i+1:i-1,n=1;return t?i+=Math.abs(n-this._options.perSwipe*Math.ceil(n/this._options.perSwipe)):i-=Math.abs(n-this._options.perSwipe*Math.ceil(n/this._options.perSwipe)),"first"===this._instance._options.wrap?i=Math.min(this._slidesCount-1,i):"last"===this._instance._options.wrap?i=Math.max(0,i):this._instance._options.wrap||(i=Math.max(0,Math.min(this._slidesCount-1,i))),{static:i%=this._slidesCount,relative:(t?"+":"-")+"="+(n=this._options.perSwipe*Math.ceil(n/this._options.perSwipe))}},_getListPosition:function(){return this._instance.list().position()[this._instance.lt]},_setListPosition:function(t){var e=this._instance.options("transitions"),i=!!e.transforms,n=!!e.transforms3d,s={},o="left"===this._instance.lt;t=t||0,n?s.transform="translate3d("+(o?t:0)+","+(o?0:t)+",0)":i?s.transform="translate("+(o?t:0)+","+(o?0:t)+")":s[this._instance.lt]=t,this._instance.list().css(s)},_addClones:function(){var e,i,n,s=this._instance,o=s.items(),r=s.first(),a=s.last(),l=s.dimension(t(window)),c=[],u=[],h=this._getListPosition(),d={};if(!s._options.wrap)return!1;if("last"!==s._options.wrap){for(i=0,n=0,e=r;l>i;)0===(e=e.prev()).length?(n=--n<-o.length?-1:n,i+=s.dimension(o.eq(n)),c.push(o.eq(n).clone().attr("data-jcarousel-clone",!0))):i+=s.dimension(e);h=Math.min(h,-i)+"px",s._items.first().before(c.reverse()),d[s.lt]=h,s.move(d)}if("first"!==s._options.wrap){for(i=0,n=-1,e=a;l>i;)0===(e=e.next()).length?(n=++n>o.length-1?0:n,i+=s.dimension(o.eq(n)),u.push(o.eq(n).clone().attr("data-jcarousel-clone",!0))):i+=s.dimension(e);s._items.last().after(u)}},_removeClones:function(){var t,e=this._instance.first().position()[this._instance.lt],i={};this._instance.list().find("[data-jcarousel-clone]").remove(),(t=Math.abs(this._instance.first().position()[this._instance.lt]-e))&&(i[this._instance.lt]=this._getListPosition()+t+"px",this._instance.move(i))},_destroy:function(){this._element.off("touchstart.jcarouselSwipe mousedown.jcarouselSwipe"),t(document).off("touchmove.jcarouselSwipe mousemove.jcarouselSwipe touchend.jcarouselSwipe touchcancel.jcarouselSwipe mouseup.jcarouselSwipe")},_reload:function(){this._create()}})}(jQuery);